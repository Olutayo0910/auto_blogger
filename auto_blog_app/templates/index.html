<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Blog Generator</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        /* Define keyframes for the rotation animation */
        @keyframes rotate {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }

        /* Apply animation to the loading circle */
        #loading-circle {
            width: 50px; /* Adjust size as needed */
            height: 50px; /* Adjust size as needed */
            border: 4px solid #ccc; /* Border style */
            border-top-color: green; /* Border color for the rotating circle */
            border-radius: 50%; /* Make it a circle */
            animation: rotate 1s linear infinite; /* Apply rotation animation */
        }

        /* Custom class to increase height of text */
        .text-tall {
            transform: scaleY(1.2); /* Adjust this value to change the height */
            display: inline-block; /* Ensure the transform doesn't affect surrounding elements */
        }
    </style>
</head>
<body class="flex flex-col min-h-screen bg-gray-100 font-sans antialiased">
    <!---Nav bar--->
    <nav class="bg-gray-100 p-4 text-black flex justify-between border-b border-green-500">
        <div>
            <a href="#" class="text-black hover:underline">Welcome {{user.username}}! </a>
            <a href="logout" class="text-black hover:underline">logout</a>
        </div>
    </nav>
    
    <!---Main--->
    <div class="flex-grow flex items-center justify-center">
        <div class="bg-white max-w-3xl mx-auto p-6 rounded-lg shadow-md transition-transform transform hover:scale-105 flex flex-col w-full">
            <!---Link section-->
            <div class="text-center font-semibold text-2xl">
                <!---Logo--->
                <h1 class="text-3xl text-center text-green-500 font-bold text-tall">Bloogle</h1>
                <div class="flex flex-col md:flex-row mt-4">
                    <input id="youtubelink" type="url" placeholder="Paste Your youtube link" class="flex-grow p-2 border border-green-500 rounded-l-md mb-2 md:mb-0">
                    <button id="generateBlogButton" class="bg-green-500 hover:bg-green-400 text-white rounded-r-md px-4 py-2 transition-colors">Generate Blog</button>
                </div>
            </div>
            
            <!--Rolling circle-->
            <div id="loading-spinner" style="display: none;" class="relative flex justify-center items-center load mx-auto mt-8">
                <div class="absolute animate-spin rounded-full h-24 w-24 border-t-2 border-b-2 border-green-500"></div>
                <img src="https://www.svgrepo.com/show/509001/avatar-thinking-9.svg" class="rounded-full h-20 w-20">
            </div>
            <!--Generated blog article-->
            <section class="mt-10 flex-grow">
                <h2 class="text-xl mb-4 text-center font-semibold">Generated Article</h2>
                <div id="blogContent" class="mt-2 text-gray-700 space-y-2">
                </div>
            </section>
        </div>
    </div>

    <footer class="text-center text-black mt-6">
        Powered by Olutayo Ogunlade
    </footer>
    <script>
        document.getElementById('generateBlogButton').addEventListener('click', async () => {
            const youtubeLink = document.getElementById('youtubelink').value;
            const blogContent = document.getElementById('blogContent');

            if (youtubeLink) {
                document.getElementById('loading-spinner').style.display = 'block';
                blogContent.innerHTML = ''; // Clear previous content

                const endpointUrl = '/generate-blog';
                try {
                    const response = await fetch(endpointUrl, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ link: youtubeLink })
                    });

                    const data = await response.json();
                    blogContent.innerHTML = data.content;
                } catch (error) {
                    console.error("Error occurred:", error);
                    alert("Something went wrong. Please try again later.");
                }
                document.getElementById('loading-spinner').style.display = 'none';
            } else {
                alert("Please enter a YouTube link.");
            }
        });
    </script>
</body>
</html>
